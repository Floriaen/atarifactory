{"numFailedTestSuites":6,"numFailedTests":4,"numPassedTestSuites":12,"numPassedTests":53,"numPendingTestSuites":0,"numPendingTests":1,"numRuntimeErrorTestSuites":2,"numTodoTests":0,"numTotalTestSuites":18,"numTotalTests":58,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1749634158567,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["GameDesignAgent Integration"],"duration":6,"failureDetails":[{}],"failureMessages":["Error: The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).\n    at new OpenAI (/Users/florian/Sources/game-agent-v2/server/node_modules/openai/src/index.ts:272:13)\n    at Object.<anonymous> (/Users/florian/Sources/game-agent-v2/server/tests/integration/agents/GameDesignAgent.integration.test.js:12:20)\n    at Promise.then.completed (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"GameDesignAgent Integration should return a valid game design from real OpenAI","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return a valid game design from real OpenAI"}],"endTime":1749634159125,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mGameDesignAgent Integration › should return a valid game design from real OpenAI\u001b[39m\u001b[22m\n\n    The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 10 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 11 |\u001b[39m   it(\u001b[32m'should return a valid game design from real OpenAI'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m openai \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mOpenAI\u001b[39m({ apiKey\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mOPENAI_API_KEY\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 13 |\u001b[39m     \u001b[36mconst\u001b[39m llmClient \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSmartOpenAI\u001b[39m(openai)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 14 |\u001b[39m     \u001b[36mconst\u001b[39m sharedState \u001b[33m=\u001b[39m createSharedState()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m     sharedState\u001b[33m.\u001b[39mtitle \u001b[33m=\u001b[39m title\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new OpenAI (\u001b[22m\u001b[2mnode_modules/openai/src/index.ts\u001b[2m:272:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/agents/GameDesignAgent.integration.test.js\u001b[39m\u001b[0m\u001b[2m:12:20)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/florian/Sources/game-agent-v2/server/tests/integration/agents/GameDesignAgent.integration.test.js","startTime":1749634158613,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["StepFixerAgent Integration"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).\n    at new OpenAI (/Users/florian/Sources/game-agent-v2/server/node_modules/openai/src/index.ts:272:13)\n    at Object.<anonymous> (/Users/florian/Sources/game-agent-v2/server/tests/integration/agents/StepFixerAgent.integration.test.js:17:20)\n    at Promise.then.completed (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"StepFixerAgent Integration should return a corrected stepCode from real OpenAI","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return a corrected stepCode from real OpenAI"}],"endTime":1749634159264,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStepFixerAgent Integration › should return a corrected stepCode from real OpenAI\u001b[39m\u001b[22m\n\n    The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 15 |\u001b[39m     sharedState\u001b[33m.\u001b[39mstep \u001b[33m=\u001b[39m { id\u001b[33m:\u001b[39m \u001b[35m2\u001b[39m\u001b[33m,\u001b[39m label\u001b[33m:\u001b[39m \u001b[32m'Add player'\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 16 |\u001b[39m     sharedState\u001b[33m.\u001b[39merrorList \u001b[33m=\u001b[39m [\u001b[32m'ReferenceError'\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 17 |\u001b[39m     \u001b[36mconst\u001b[39m openai \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mOpenAI\u001b[39m({ apiKey\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mOPENAI_API_KEY\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m     \u001b[36mconst\u001b[39m llmClient \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSmartOpenAI\u001b[39m(openai)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m     \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mStepFixerAgent\u001b[39m(sharedState\u001b[33m,\u001b[39m { logger\u001b[33m:\u001b[39m console\u001b[33m,\u001b[39m traceId\u001b[33m,\u001b[39m llmClient })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 20 |\u001b[39m     expect(\u001b[36mtypeof\u001b[39m result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'string'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new OpenAI (\u001b[22m\u001b[2mnode_modules/openai/src/index.ts\u001b[2m:272:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/agents/StepFixerAgent.integration.test.js\u001b[39m\u001b[0m\u001b[2m:17:20)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/florian/Sources/game-agent-v2/server/tests/integration/agents/StepFixerAgent.integration.test.js","startTime":1749634159130,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["PlannerAgent Integration"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).\n    at new OpenAI (/Users/florian/Sources/game-agent-v2/server/node_modules/openai/src/index.ts:272:13)\n    at Object.<anonymous> (/Users/florian/Sources/game-agent-v2/server/tests/integration/agents/PlannerAgent.integration.test.js:20:20)\n    at Promise.then.completed (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"PlannerAgent Integration should return a valid plan from real OpenAI","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return a valid plan from real OpenAI"}],"endTime":1749634159406,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPlannerAgent Integration › should return a valid plan from real OpenAI\u001b[39m\u001b[22m\n\n    The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   it(\u001b[32m'should return a valid plan from real OpenAI'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m     \u001b[36mconst\u001b[39m openai \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mOpenAI\u001b[39m({ apiKey\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mOPENAI_API_KEY\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m     \u001b[36mconst\u001b[39m llmClient \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSmartOpenAI\u001b[39m(openai)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m     \u001b[36mconst\u001b[39m sharedState \u001b[33m=\u001b[39m createSharedState()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m     sharedState\u001b[33m.\u001b[39mgameDef \u001b[33m=\u001b[39m gameDef\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new OpenAI (\u001b[22m\u001b[2mnode_modules/openai/src/index.ts\u001b[2m:272:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/agents/PlannerAgent.integration.test.js\u001b[39m\u001b[0m\u001b[2m:20:20)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/florian/Sources/game-agent-v2/server/tests/integration/agents/PlannerAgent.integration.test.js","startTime":1749634159272,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["StepBuilderAgent Integration"],"duration":4,"failureDetails":[{}],"failureMessages":["Error: The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).\n    at new OpenAI (/Users/florian/Sources/game-agent-v2/server/node_modules/openai/src/index.ts:272:13)\n    at Object.<anonymous> (/Users/florian/Sources/game-agent-v2/server/tests/integration/agents/StepBuilderAgent.integration.test.js:21:20)\n    at Promise.then.completed (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/florian/Sources/game-agent-v2/server/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"StepBuilderAgent Integration should return a code block from real OpenAI","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return a code block from real OpenAI"}],"endTime":1749634159545,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStepBuilderAgent Integration › should return a code block from real OpenAI\u001b[39m\u001b[22m\n\n    The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 19 |\u001b[39m     sharedState\u001b[33m.\u001b[39mstep \u001b[33m=\u001b[39m { id\u001b[33m:\u001b[39m \u001b[35m2\u001b[39m\u001b[33m,\u001b[39m label\u001b[33m:\u001b[39m \u001b[32m'Add player'\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 20 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 21 |\u001b[39m     \u001b[36mconst\u001b[39m openai \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mOpenAI\u001b[39m({ apiKey\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mOPENAI_API_KEY\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m     \u001b[36mconst\u001b[39m llmClient \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSmartOpenAI\u001b[39m(openai)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m     \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mStepBuilderAgent\u001b[39m(sharedState\u001b[33m,\u001b[39m { logger\u001b[33m:\u001b[39m console\u001b[33m,\u001b[39m traceId\u001b[33m,\u001b[39m llmClient })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 24 |\u001b[39m     expect(\u001b[36mtypeof\u001b[39m result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'string'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new OpenAI (\u001b[22m\u001b[2mnode_modules/openai/src/index.ts\u001b[2m:272:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/agents/StepBuilderAgent.integration.test.js\u001b[39m\u001b[0m\u001b[2m:21:20)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/florian/Sources/game-agent-v2/server/tests/integration/agents/StepBuilderAgent.integration.test.js","startTime":1749634159410,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["RuntimePlayabilityAgent"],"duration":4106,"failureDetails":[],"failureMessages":[],"fullName":"RuntimePlayabilityAgent should return all booleans (placeholder)","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should return all booleans (placeholder)"},{"ancestorTitles":["RuntimePlayabilityAgent"],"duration":3405,"failureDetails":[],"failureMessages":[],"fullName":"RuntimePlayabilityAgent should detect input responsiveness (ArrowRight)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should detect input responsiveness (ArrowRight)"},{"ancestorTitles":["RuntimePlayabilityAgent"],"duration":3495,"failureDetails":[],"failureMessages":[],"fullName":"RuntimePlayabilityAgent should detect player movement in response to input","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should detect player movement in response to input"},{"ancestorTitles":["RuntimePlayabilityAgent"],"duration":3403,"failureDetails":[],"failureMessages":[],"fullName":"RuntimePlayabilityAgent should detect win condition after simulated input","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should detect win condition after simulated input"}],"endTime":1749634174628,"message":"","name":"/Users/florian/Sources/game-agent-v2/server/tests/unit/RuntimePlayabilityAgent.test.js","startTime":1749634159549,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["BlockInserterAgent"],"duration":75,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should merge new code into existing code","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should merge new code into existing code"},{"ancestorTitles":["BlockInserterAgent"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should handle empty currentCode","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle empty currentCode"},{"ancestorTitles":["BlockInserterAgent"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should handle empty stepCode","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle empty stepCode"},{"ancestorTitles":["BlockInserterAgent"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should format merged code using prettier","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should format merged code using prettier"},{"ancestorTitles":["BlockInserterAgent"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should handle syntax errors gracefully","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle syntax errors gracefully"},{"ancestorTitles":["BlockInserterAgent"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should preserve function declarations","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should preserve function declarations"},{"ancestorTitles":["BlockInserterAgent"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should handle variable declarations correctly (AST)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle variable declarations correctly (AST)"},{"ancestorTitles":["BlockInserterAgent"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should return a string (new currentCode) after insertion/merge (MockOpenAI)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return a string (new currentCode) after insertion/merge (MockOpenAI)"},{"ancestorTitles":["BlockInserterAgent"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should merge stepCode into an existing function if names match","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should merge stepCode into an existing function if names match"},{"ancestorTitles":["BlockInserterAgent"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should append a new function if not present in currentCode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should append a new function if not present in currentCode"},{"ancestorTitles":["BlockInserterAgent"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should append statements if stepCode is not a function","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should append statements if stepCode is not a function"},{"ancestorTitles":["BlockInserterAgent"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should merge functions with early returns without breaking logic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should merge functions with early returns without breaking logic"},{"ancestorTitles":["BlockInserterAgent"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should merge functions with different control flow","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should merge functions with different control flow"},{"ancestorTitles":["BlockInserterAgent"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should merge multiple functions at once","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should merge multiple functions at once"},{"ancestorTitles":["BlockInserterAgent"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should merge code with nested functions","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should merge code with nested functions"},{"ancestorTitles":["BlockInserterAgent"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should merge code with comments and formatting differences","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should merge code with comments and formatting differences"},{"ancestorTitles":["BlockInserterAgent"],"duration":42,"failureDetails":[],"failureMessages":[],"fullName":"BlockInserterAgent should merge function bodies correctly across multiple steps","invocations":1,"location":null,"numPassingAsserts":12,"retryReasons":[],"status":"passed","title":"should merge function bodies correctly across multiple steps"}],"endTime":1749634175178,"message":"","name":"/Users/florian/Sources/game-agent-v2/server/tests/unit/BlockInserterAgent.test.js","startTime":1749634174646,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Pipeline Integration"],"duration":53,"failureDetails":[],"failureMessages":[],"fullName":"Pipeline Integration should process game design through to code generation","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"should process game design through to code generation"},{"ancestorTitles":["Pipeline Integration"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"Pipeline Integration should handle error in StepBuilderAgent gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle error in StepBuilderAgent gracefully"}],"endTime":1749634175414,"message":"","name":"/Users/florian/Sources/game-agent-v2/server/tests/integration/pipelineIntegration.test.js","startTime":1749634175187,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["GameDesignAgent"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"GameDesignAgent should return an object with the correct keys (MockOpenAI)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return an object with the correct keys (MockOpenAI)"},{"ancestorTitles":["GameDesignAgent"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"GameDesignAgent logs the call with correct arguments","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"logs the call with correct arguments"},{"ancestorTitles":["GameDesignAgent"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"GameDesignAgent throws and logs error if llmClient is missing","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"throws and logs error if llmClient is missing"},{"ancestorTitles":["GameDesignAgent"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"GameDesignAgent loads prompt and calls llmClient.chatCompletion with correct prompt","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"loads prompt and calls llmClient.chatCompletion with correct prompt"},{"ancestorTitles":["GameDesignAgent"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"GameDesignAgent logs and returns parsed output if contract matches","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"logs and returns parsed output if contract matches"},{"ancestorTitles":["GameDesignAgent"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"GameDesignAgent throws and logs error if LLM output is missing required fields","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"throws and logs error if LLM output is missing required fields"},{"ancestorTitles":["GameDesignAgent"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"GameDesignAgent logs and throws on any other error","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"logs and throws on any other error"},{"ancestorTitles":["GameDesignAgent"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"GameDesignAgent updates sharedState with game definition","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"updates sharedState with game definition"}],"endTime":1749634175597,"message":"","name":"/Users/florian/Sources/game-agent-v2/server/tests/unit/GameDesignAgent.test.js","startTime":1749634175432,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["StaticCheckerAgent"],"duration":40,"failureDetails":[],"failureMessages":[],"fullName":"StaticCheckerAgent should return an array of error strings (MockOpenAI)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return an array of error strings (MockOpenAI)"},{"ancestorTitles":["StaticCheckerAgent"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"StaticCheckerAgent should detect duplicate function declarations","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should detect duplicate function declarations"},{"ancestorTitles":["StaticCheckerAgent"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"StaticCheckerAgent should detect undeclared variables","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should detect undeclared variables"},{"ancestorTitles":["StaticCheckerAgent"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"StaticCheckerAgent should detect syntax errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should detect syntax errors"}],"endTime":1749634175849,"message":"","name":"/Users/florian/Sources/game-agent-v2/server/tests/unit/StaticCheckerAgent.test.js","startTime":1749634175602,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Agent Chain Integration"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Agent Chain Integration should chain GameDesignAgent -> PlannerAgent -> StepBuilderAgent successfully","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"status":"passed","title":"should chain GameDesignAgent -> PlannerAgent -> StepBuilderAgent successfully"},{"ancestorTitles":["Agent Chain Integration"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Agent Chain Integration should handle errors gracefully in the chain","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle errors gracefully in the chain"},{"ancestorTitles":["Agent Chain Integration"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Agent Chain Integration should maintain state between steps in the chain","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should maintain state between steps in the chain"}],"endTime":1749634175973,"message":"","name":"/Users/florian/Sources/game-agent-v2/server/tests/integration/agentChain.test.js","startTime":1749634175853,"status":"focused","summary":""},{"assertionResults":[{"ancestorTitles":["StepBuilderAgent"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"StepBuilderAgent should return a string (code block) for the step (MockOpenAI)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return a string (code block) for the step (MockOpenAI)"},{"ancestorTitles":["StepBuilderAgent"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"StepBuilderAgent StepBuilderAgent strips markdown code block markers from LLM output","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"StepBuilderAgent strips markdown code block markers from LLM output"}],"endTime":1749634176117,"message":"","name":"/Users/florian/Sources/game-agent-v2/server/tests/unit/StepBuilderAgent.test.js","startTime":1749634175978,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["FeedbackAgent"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"FeedbackAgent should return an object with retryTarget and suggestion (MockOpenAI)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should return an object with retryTarget and suggestion (MockOpenAI)"}],"endTime":1749634176266,"message":"","name":"/Users/florian/Sources/game-agent-v2/server/tests/unit/FeedbackAgent.test.js","startTime":1749634176122,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["SyntaxSanityAgent"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SyntaxSanityAgent should return an object with a boolean valid property (MockOpenAI)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return an object with a boolean valid property (MockOpenAI)"},{"ancestorTitles":["SyntaxSanityAgent"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SyntaxSanityAgent should return valid: true for syntactically correct code","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return valid: true for syntactically correct code"},{"ancestorTitles":["SyntaxSanityAgent"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SyntaxSanityAgent should return valid: false and an error for syntax errors","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return valid: false and an error for syntax errors"},{"ancestorTitles":["SyntaxSanityAgent"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SyntaxSanityAgent should return valid: true for code with runtime errors (only syntax checked)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return valid: true for code with runtime errors (only syntax checked)"}],"endTime":1749634176422,"message":"","name":"/Users/florian/Sources/game-agent-v2/server/tests/unit/SyntaxSanityAgent.test.js","startTime":1749634176273,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["StepFixerAgent"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"StepFixerAgent should return a string (corrected stepCode) (MockOpenAI)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return a string (corrected stepCode) (MockOpenAI)"},{"ancestorTitles":["StepFixerAgent"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"StepFixerAgent StepFixerAgent strips markdown code block markers from LLM output","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"StepFixerAgent strips markdown code block markers from LLM output"}],"endTime":1749634176560,"message":"","name":"/Users/florian/Sources/game-agent-v2/server/tests/unit/StepFixerAgent.test.js","startTime":1749634176429,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["SharedState"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"SharedState createSharedState returns an object with all required fields","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"createSharedState returns an object with all required fields"},{"ancestorTitles":["SharedState"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SharedState metadata contains startTime and lastUpdate","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"metadata contains startTime and lastUpdate"},{"ancestorTitles":["SharedState"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SharedState each call creates a new independent state object","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"each call creates a new independent state object"}],"endTime":1749634176611,"message":"","name":"/Users/florian/Sources/game-agent-v2/server/tests/unit/SharedState.test.js","startTime":1749634176569,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"chatCompletion returns the Promise from the LLM client","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"chatCompletion returns the Promise from the LLM client"},{"ancestorTitles":[],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"chatCompletion handles JSON extraction from code block","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"chatCompletion handles JSON extraction from code block"},{"ancestorTitles":[],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"chatCompletion handles invalid JSON","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"chatCompletion handles invalid JSON"},{"ancestorTitles":[],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"chatCompletion handles different output types","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"chatCompletion handles different output types"}],"endTime":1749634176656,"message":"","name":"/Users/florian/Sources/game-agent-v2/server/tests/unit/SmartOpenAI.test.js","startTime":1749634176613,"status":"passed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1749634176857,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    Cannot find module '../agents/PlannerAgent' from 'tests/unit/PlannerAgent.test.js'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mPlannerAgent\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../agents/PlannerAgent'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mMockOpenAI\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../mocks/MockOpenAI'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mconst\u001b[39m { createSharedState } \u001b[33m=\u001b[39m require(\u001b[32m'../types/SharedState'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mconst\u001b[39m mockLogger \u001b[33m=\u001b[39m { info\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m {}\u001b[33m,\u001b[39m error\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m {}\u001b[33m,\u001b[39m warn\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m {} }\u001b[33m;\u001b[39m\u001b[0m\n\n      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22mnode_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[0m\u001b[36mtests/unit/PlannerAgent.test.js\u001b[39m\u001b[0m\u001b[2m:1:55)\u001b[22m\n","name":"/Users/florian/Sources/game-agent-v2/server/tests/unit/PlannerAgent.test.js","startTime":1749634176857,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1749634176857,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    Cannot find module '../controller' from 'tests/e2e/pipeline-v2-endpoint.test.js'\n\n    \u001b[0m \u001b[90m 60 |\u001b[39m\n     \u001b[90m 61 |\u001b[39m \u001b[90m// Mock the controller module\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 62 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../controller'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 63 |\u001b[39m   \u001b[36mreturn\u001b[39m {\n     \u001b[90m 64 |\u001b[39m     runPipeline\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockImplementation(\u001b[36masync\u001b[39m (title) \u001b[33m=>\u001b[39m {\n     \u001b[90m 65 |\u001b[39m       \u001b[36mreturn\u001b[39m {\u001b[0m\n\n      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22mnode_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\n      \u001b[2mat Object.mock (\u001b[22m\u001b[0m\u001b[36mtests/e2e/pipeline-v2-endpoint.test.js\u001b[39m\u001b[0m\u001b[2m:62:6)\u001b[22m\n","name":"/Users/florian/Sources/game-agent-v2/server/tests/e2e/pipeline-v2-endpoint.test.js","startTime":1749634176857,"status":"failed","summary":""}],"wasInterrupted":false}
