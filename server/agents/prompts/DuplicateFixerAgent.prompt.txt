Here is the full plan for the game (numbered steps):
{{plan}}

Here is the current game code so far:
{{currentCode}}

Here is the new code for the next step:
{{stepCode}}

The following names are already declared in the current code: {{duplicates}}.

Rewrite the new code so that it does NOT redeclare any of these names under any circumstances. If the new code needs to add logic to an existing function, MERGE the logic into the existing function. If merging is not possible, use a new, unique name for the new function or variable. Output only the corrected JavaScript code, no comments or explanations. 