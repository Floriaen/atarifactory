<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <title>{{title}}</title>
  <meta name='viewport' content='width=device-width,initial-scale=1.0,user-scalable=no'>
  <link rel='stylesheet' href='controlBar.css'>
  <style>
    body{margin:0;background:#181818;}
    #game-container{width:100vw;position:relative;}
    #game-canvas{display:block;margin:0 auto;background:#222;width:100%;height:100%;}
  </style>
</head>
<body>
  <div id='game-container'>
    <canvas id='game-canvas'></canvas>
  </div>
  {{controlBarHTML}}
  <script src='controlBar.js'></script>
  <script src='background.js'></script>
  <script src='sprites.js'></script>
  <script>
    // Dynamically resize the game container and canvas to avoid control bar overlap
    function resizeGameArea() {
      var bar = document.getElementById('gamepad-bar');
      var container = document.getElementById('game-container');
      var canvas = document.getElementById('game-canvas');
      var barHeight = bar ? bar.offsetHeight : 90;
      var h = window.innerHeight - barHeight;
      container.style.height = h + 'px';
      canvas.width = container.offsetWidth;
      canvas.height = h;
      canvas.style.width = '100%';
      canvas.style.height = '100%';
    }
    window.addEventListener('resize', resizeGameArea);
    window.addEventListener('DOMContentLoaded', resizeGameArea);
    // Gamepad event state helper
    window.gamepadState = window.gamepadState || { up: false, down: false, left: false, right: false, btn1: false, btn2: false };
    window.addEventListener('gamepad-press', function(e) { window.gamepadState[e.detail.key] = true; });
    window.addEventListener('gamepad-release', function(e) { window.gamepadState[e.detail.key] = false; });

    // sprite helpers moved to sprites.js
  </script>
  <script src='game.js'></script>
</body>
</html>
